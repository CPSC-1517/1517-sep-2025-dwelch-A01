@page "/singlequery"
<PageTitle>Single Query</PageTitle>

<!-- 
    REMEMBER:!!!!!!!!!!!!! 
    You need the following statement so your buttons will respond
-->
@rendermode InteractiveServer

<!-- Additional Namespaces-->
@using WestWindSystem.BLL
@using WestWindSystem.Entities;

<h1>Region: Single Query</h1>
<cite>... the single record query from the database</cite>

@if (feedBackMsg.Length > 0)
{
    <div class="alert alert-info">
        <p>@feedBackMsg</p>
    </div>
}

@if (errorMsgs.Count > 0)
{
    <div class="alert alert-danger">
        <p>Please fix the following issues:</p>
        <ul>
            @foreach (var error in errorMsgs)
            {
                <li>@error</li>
            }
        </ul>
    </div>
}

<br/><br/>
<!-- create the form for the query-->
@*
    form area
    standard html controls
    use bootstrap for formatting
    form will be two column
*@

<div class="row">
    <div class="col-md-6">
        <!-- this column will hold the query input controls and buttons-->
        <p><strong>Input query controls and buttons</strong></p>

        <label for="regionid">Enter a region id:</label>&nbsp;&nbsp;
        <input id="regionid" type="number" @bind="entryarg"
            placeholder="enter id" style="width:100px;" />&nbsp;&nbsp;
        <button type="submit" @onclick="GetByEntry"
                class="btn btn-outline-primary rounded-pill">
            Fetch By Entry   
        </button>

        <br/><br/>
        <label for="selectid">Select a region:</label>&nbsp;&nbsp;
        <select id="selectid" @bind="selectionarg">
            <option value="0">... select ...</option>
            <!-- 
                this collection for the loop will be a collection returned
                    from the database 
                remember this should ONLY be consider IF your collection
                    for the control is samll, consider an upper limit of 100 records
            -->
            @foreach (var item in regionList)
            {
                <option value="@item.RegionID">@item.RegionDescription</option>
            }
        </select>&nbsp;&nbsp;
        <button type="submit" @onclick="GetBySelection"
                class="btn btn-outline-secondary rounded-pill">
            Fetch By Selection
        </button>
    </div>
    <div class="col-md-6">
        <!-- this column will hold the query result output
             no output attempt will be done unless the page actually
                has something to display
        -->
    </div>
</div>
@code {
    private string feedBackMsg = "";
    private List<string> errorMsgs = new();

    //variable for binding
    private int entryarg = 0;
    private int selectionarg = 0;

    //variables to hold data from database
    private List<Region> regionList = new();

    //inject any needed services
    [Inject]
    public RegionServices _regionServices { get; set; }


    protected override void OnInitialized()
    {
        base.OnInitialized();

        //load the collection required by the select control
        //  so that the options appear
        regionList = _regionServices.Region_GetAll();
    }
    //event methods (the onclick of your buttons)
    public void GetByEntry()
    {
        
    }

    public void GetBySelection()
    {

    }
}
